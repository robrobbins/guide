!function(a){var b={delegates:{},extensions:{},getPath:function(a,b){var c,d;for(d=a.split("."),c;d.length&&(c=d.shift());){if(!d.length)return b[c];b=b[c]||{}}return b},inherit:function(a,b){b.prototype=Object.create(a.prototype),b.prototype.constructor=b},makeMeASandwich:function(){return"Okay."},namespace:function(b){this.getPath(b,a)||this.setPath(b,{},a)},premier:null,setPath:function(a,b,c){var e,d=a.split(".");for(e;d.length&&(e=d.shift());)d.length?c=c[e]?c[e]:c[e]={}:c[e]=b},uid:0,unique:function(a){return a?a+this.uid++:this.uid++},unsetPath:function(a,b){var d,c=a.split(".");for(d;c.length&&(d=c.shift());)c.length?b=b[d]:delete b[d]}};b.Base=function(){this.delegates=[],this.uid=b.unique()},b.Base.prototype.addDelegate=function(a){return a.delegator=this,this.delegates.push(a),"addedAsDelegate"in a&&a.addedAsDelegate(this),this},b.Base.prototype.base=function(){for(var e,a=Array.prototype.slice.call(arguments),b=a.shift(),c=!1,d=this;!c;)e=Object.getPrototypeOf(d),e[b]&&e[b]!==this[b]?c=!0:d=e;return e[b].apply(this,a)},b.Base.prototype.construct=function(){Object.getPrototypeOf(this).constructor.apply(this,arguments||[])},b.Base.prototype.delegate=function(a,b){var d,c=this.delegates;for(d=0;d<c.length;d++)if(c[d].role===a)return b?c[d][b].bind(c[d]):c[d]},b.Base.prototype.getDelegate=function(a){return this.delegate(a)},b.Base.prototype.removeDelegate=function(a){var c,b=this.delegates;for(c=0;c<b.length;c++)if(b[c].role===a)return b[c].delegator=void 0,b.splice(c,1),this;return this},b.Base.prototype.role="base",b.Model=function(a){b.Base.call(this),this.data=a||{},this.callbacks=[],this.changeRecords=[]},b.inherit(b.Base,b.Model),b.Model.prototype.get=function(a){return this.data[a]},b.Model.prototype.getPath=function(a){return b.getPath(a,this.data)},b.Model.prototype.gets=function(a){var b,c={};for(b=0;b<a.length;b++)c[a[b]]=-1===a[b].indexOf(".")?this.data[a[b]]:this.getPath(a[b]);return c},b.Model.prototype.role="model",b.Model.prototype.set=function(a,b){return this.data[a]=b,this},b.Model.prototype.setPath=function(a,c){return b.setPath(a,c,this.data),this},b.Model.prototype.sets=function(a){var b,c=Object.keys(a);for(b=0;b<c.length;b++)-1===c[b].indexOf(".")?this.set(c[b],a[c[b]]):this.setPath(c[b],a[c[b]]);return this},b.Model.prototype.unset=function(a){return delete this.data[a],this},b.Model.prototype.unsetPath=function(a){return b.unsetPath(a,this.data),this},b.Model.prototype.unsets=function(a){var b;for(b=0;b<a.length;b++)-1===a[b].indexOf(".")?this.unset(a[b]):this.unsetPath(a[b]);return this},b.Container=function(a){b.Base.call(this),this.children=[],this.childNames={},a&&this.addChildren(a)},b.inherit(b.Base,b.Container),b.Container.prototype.addChild=function(a,b){var c=this.children;return a.parent=this,a.index=c.length,b&&(a.name=b,this.childNames[b]=a.index),c.push(a),"addedToParent"in a&&a.addedToParent(this),this},b.Container.prototype.addChildren=function(a){var b,c;if(Array.isArray(a))for(b=0;b<a.length;b++)this.addChild(a[b]);else for(c=Object.keys(a),b=0;b<c.length;b++)this.addChild(a[c[b]],c[b]);return this},b.Container.prototype.bubble=function(){return this.parent},b.Container.prototype.eachChild=function(){var c,d,e,a=Array.prototype.slice.call(arguments),b=a.shift();for(c=0,d=this.children.length;d>c;c++)e=this.children[c],b in e&&e[b].apply(e,a);return this},b.Container.prototype.getChild=function(a){return"string"==typeof a?this.children[this.childNames[a]]:this.children[a]},b.Container.prototype._indexChildren_=function(a){var d,b=this.children,c=this.childNames;for(d=b.length;d>a;a++)b[a].index--,b[a].name in c&&(c[b[a].name]=b[a].index)},b.Container.prototype.removeChild=function(a){var b,d,c=typeof a;return d="object"===c?a:"string"===c?this.children[this.childNames[a]]:this.children[a],b=d.index,this.children.splice(b,1),delete this.childNames[d.name],delete d.parent,delete d.index,delete d.name,this._indexChildren_(b),this},b.Container.prototype.removeChildren=function(a){var c,b=Object.keys(this.childNames);for(c=0;c<b.length;c++)this.getChild(b[c]).removeFromParent(a);return this},b.Container.prototype.removeFromParent=function(){return this.parent.removeChild(this),this},b.Container.prototype.role="container",b.Container.prototype.send=function(){var c,d,e,a=Array.prototype.slice.call(arguments),b=this.model&&this.model.data;b&&"sendMethod"in b?c=b.sendMethod:"string"==typeof a[0]&&(c=a.shift()),c||(c="data"in a[0]?a[0].data.sendMethod:a[0].sendMethod||void 0),d=b&&b.sendTarget||this.bubble(),e=d[c];for(;!e&&(d=d.bubble());)e=d[c];return e&&(a.unshift(this),e.apply(d,a)),this},b.View=function(a,c){b.Container.call(this),c&&(this.model="model"===c.role?c:this.model=new b.Model(c)),this.setEl(a),"view"===this.role&&this.init()},b.inherit(b.Container,b.View),b.View.prototype.becomePremier=function(){var a,c=function(){this.isPremier=!0,b.premier=this}.bind(this);return(a=b.premier)&&a.uid!==this.uid?a.resignPremier(c):c(),this},b.View.prototype.init=$.noop,b.View.prototype._normalizedEl_=function(a){return"string"==typeof a?$(a):a.length?a:$(a)},b.View.prototype.resignPremier=function(a){var c;return this.isPremier=!1,(c=b.premier)&&c.uid===this.uid&&(b.premier=null),a&&a(),this},b.View.prototype.role="view",b.View.prototype.setEl=function(a){var c,d,b=this.model&&this.model.data;return a?this.$el=this._normalizedEl_(a):(d=b?b.tagName||"div":"div",this.$el=$(document.createElement(d)),b&&(c=b.attributes)&&this.$el.attr(c)),this},b.View.prototype.$=function(a){return this.$el.find(a)},b.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g},b.escapes={},function(a){var b={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var c in b)a.escapes[b[c]]=c}(b),b.htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},b.escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g,b.htmlEscaper=/[&<>"'\/]/g,b.unescaper=/\\(\\|'|r|n|t|u2028|u2029)/g,b.escape=function(a){return a.replace(b.htmlEscaper,function(a){return b.htmlEscapes[a]})},b.unescape=function(a){return a.replace(b.unescaper,function(a,c){return b.escapes[c]})},b.template=function O(a,c,d){d||(d="data");var f,O,e=b.templateSettings,g="_p+='"+a.replace(b.escaper,function(a){return"\\"+b.escapes[a]}).replace(e.escape,function(a,c){return"'+\n((_t=("+b.unescape(c)+"))==null?'':sudo.escape(_t))+\n'"}).replace(e.interpolate,function(a,c){return"'+\n((_t=("+b.unescape(c)+"))==null?'':_t)+\n'"}).replace(e.evaluate,function(a,c){return"';\n"+b.unescape(c)+"\n_p+='"})+"';\n";return g="var _t,_p='';"+g+"return _p;\n",f=new Function(d,g),c?f(c):(O=function(a){return f.call(this,a)},O.source="function("+d+"){\n"+g+"}",O)},b.DataView=function(a,c){b.View.call(this,a,c),$.extend(this,b.extensions.listener),this.model.data.autoRender&&(this.autoRenderBlacklist={event:!0,events:!0},this.model.observe||$.extend(this.model,b.extensions.observable)),"dataview"===this.role&&this.init()},b.inherit(b.View,b.DataView),b.DataView.prototype.addedToParent=function(){return this.bindEvents(),this.model.data.autoRender?(this.observer=this.model.observe(this.render.bind(this)),this):this.render()},b.DataView.prototype.removeFromParent=function(){return this.parent.removeChild(this),this.unbindEvents().$el.remove(),this.observer&&this.model.unobserve(this.observer),this},b.DataView.prototype.render=function(a){if(a&&this.autoRenderBlacklist[a.name])return this;var c=this.model.data;return"string"==typeof c.template&&(c.template=b.template(c.template)),this.$el.html(c.template(c)),c.renderTarget&&(this._normalizedEl_(c.renderTarget)[c.renderMethod||"append"](this.$el),delete c.renderTarget),this},b.DataView.prototype.role="dataview",b.Navigator=function(a){this.started=!1,this.slashStripper=/^\/+|\/+$/g,this.leadingStripper=/^[#\/]|\s+$/g,this.trailingStripper=/\/$/,this.construct(a)},b.Navigator.prototype=Object.create(b.Model.prototype),b.Navigator.prototype.buildPath=function(){var b,a=Array.prototype.slice.call(arguments);return"object"==typeof a[a.length-1]&&(b=this.getQuery(a.pop())),this.data.root+a.join("/")+(b||"")},b.Navigator.prototype.buildRelativePath=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(this.data.fragment),this.buildPath.apply(this,a)},b.Navigator.prototype.getFragment=function(b){var c=this.data.root;return b||(this.isPushState?(b=a.location.pathname,c=c.replace(this.trailingStripper,""),b.indexOf(c)||(b=b.substr(c.length))):b=this.getHash()),decodeURIComponent(b.replace(this.leadingStripper,""))},b.Navigator.prototype.getHash=function(b){b||(b=a.location.href);var c=b.match(/#(.*)$/);return c?c[1]:""},b.Navigator.prototype.getQuery=function(a){return"?"+$.param(a)},b.Navigator.prototype.getSearch=function(b){b||(b=a.location.href);var c=b.match(/\?(.*)$/);return c?c[1]:""},b.Navigator.prototype.getUrl=function(){return this.data.root+this.data.fragment},b.Navigator.prototype.go=function(b){if(!this.started)return!1;if(this.urlChanged(b))return this.isPushState?a.history.pushState({},document.title,this.getUrl()):this.isHashChange&&(a.location.hash="#"+this.data.fragment),this.setData()},b.Navigator.prototype.handleChange=function(){return this.urlChanged()?this.setData():void 0},b.Navigator.prototype.parseQuery=function(){var c,d,a={},b=this.data.query;if(b){for(b=b.split("&"),c=0;c<b.length;c++)b[c]&&(d=b[c].split("="),a[d[0]]=d[1]);return a}},b.Navigator.prototype.setData=function(){var a=this.data.fragment,b=this.data.observable||this;return this.data.query&&(a=-1!==a.indexOf("?")?a.split("?")[0]:a.split("#")[0]),b.set(a,this.parseQuery()),this},b.Navigator.prototype.start=function(){var b,c,e;if(!this.started){if(b=a.history&&a.history.pushState,this.started=!0,this.isHashChange=this.data.useHashChange&&"onhashchange"in a||!b&&"onhashchange"in a,this.isPushState=!this.isHashChange&&!!b,this.data.root=("/"+this.data.root+"/").replace(this.slashStripper,"/"),this.urlChanged(),this.isPushState)$(a).on("popstate",this.handleChange.bind(this));else{if(!this.isHashChange)return;$(a).on("hashchange",this.handleChange.bind(this))}if(c=a.location.pathname.replace(/[^\/]$/,"$&/")===this.data.root,!this.data.stay){if(this.isHashChange&&!c)return a.location.replace(this.data.root+a.location.search+"#"+this.data.fragment),!0;this.isPushState&&c&&a.location.hash&&(e=this.getHash().replace(this.leadingStripper,""),a.history.replaceState({},document.title,this.data.root+e+a.location.search))}return this}},b.Navigator.prototype.urlChanged=function(a){var b=this.getFragment(a);return b===this.data.fragment?!1:(this.data.fragment=b,this.data.query=this.getSearch(b)||this.getSearch()||this.getHash(b)||this.getHash(),!0)},b.extensions.observable={_deliver_:function(a){var b,c=this.callbacks;for(b=0;b<c.length;b++)c[b](a)},deliverChangeRecords:function(){var a,b=this.changeRecords;for(a;b.length&&(a=b.shift());)this._deliver_(a);return this},observe:function(a){var b=this.callbacks;return-1===b.indexOf(a)&&b.push(a),a},observes:function(a){var b;for(b=0;b<a.length;b++)this.observe(a[b]);return a},set:function(a,b,c){var d={name:a,object:this.data};return a in this.data?(d.type="updated",d.oldValue=this.data[a]):d.type="new",this.data[a]=b,this.changeRecords.push(d),c?this:this.deliverChangeRecords()},setPath:function(a,b,c){var g,d=this.data,e={name:a,object:this.data},f=a.split(".");for(g;f.length&&(g=f.shift());)f.length?d=d[g]?d[g]:d[g]={}:(g in d?(e.type="updated",e.oldValue=d[g]):e.type="new",d[g]=b);return this.changeRecords.push(e),c?this:this.deliverChangeRecords()},sets:function(a,b){var c,d=Object.keys(a);for(c=0;c<d.length;c++)-1===d[c].indexOf(".")?this.set(d[c],a[d[c]],!0):this.setPath(d[c],a[d[c]],!0);return b?this:this.deliverChangeRecords()},unobserve:function(a){var b=this.callbacks,c=b.indexOf(a);return-1!==c&&b.splice(c,1),this},unobserves:function(a){var b;for(b=0;b<a.length;b++)this.unobserve(a[b]);return this},unset:function(a,b){var c={name:a,object:this.data,type:"deleted"},d=!!this.data[a];return delete this.data[a],this._unset_(c,d,b)},_unset_:function(a,b,c){return b?(this.changeRecords.push(a),c?this:this.deliverChangeRecords()):this},unsetPath:function(a,b){var f,g,c={name:a,object:this.data,type:"deleted"},d=this.data,e=a.split(".");for(f;e.length&&(f=e.shift());)e.length?d=d[f]:(g=!!d[f],delete d[f]);return this._unset_(c,g,b)},unsets:function(a,b){var c;for(c=0;c<a.length;c++)-1===a[c].indexOf(".")?this.unset(k[c],!0):this.unsetPath(k[c],!0);return b?this:this.deliverChangeRecords()}},b.extensions.listener={bindEvents:function(){var a;return(a=this.model.data.event||this.model.data.events)&&this._handleEvents_(a,1),this},_handleEvents_:function(a,b){var c;if(Array.isArray(a))for(c=0;c<a.length;c++)this._handleEvent_(a[c],b);else this._handleEvent_(a,b)},_handleEvent_:function(a,b){b?this.$el.on(a.name,a.sel,a.data,"string"==typeof a.fn?this[a.fn].bind(this):a.fn):this.$el.off(a.name,a.sel)},rebindEvents:function(){return this.unbindEvents().bindEvents()},unbindEvents:function(){var a;return(a=this.model.data.event||this.model.data.events)&&this._handleEvents_(a),this}},b.extensions.persistable={create:function(a){return this._sendData_("POST",a)},destroy:function(a){return this._sendData_("DELETE",a)},_normalizeParams_:function(a,b,c){b||(b=$.extend({},this.data.ajax)),b.url||(b.url=this.url(b.baseUrl)),b.type||(b.type=a),b.dataType||(b.dataType="json");var d="json"===b.dataType;return b.global||(b.global=!1),b.success||(b.success=function(a,b){a?this.sets(d&&"string"==typeof a?JSON.parse(a):a):this.set("ajaxStatus",b)}.bind(this)),c?$.extend(b,c):b},read:function(a){return $.ajax(this._normalizeParams_("GET",null,a))},save:function(a){return"id"in this.data?this.update(a):this.create(a)},_sendData_:function(a,b){return opts=$.extend({},this.data.ajax),opts.contentType||(opts.contentType="application/json"),opts.data||(opts.data=this.data),"application/json"===opts.contentType&&"string"!=typeof opts.data&&(opts.data=JSON.stringify(opts.data)),"processData"in opts||(opts.processData=!1),$.ajax(this._normalizeParams_(a,opts,b))},update:function(a){return this._sendData_(this.data.ajax.patch||a&&a.patch?"PATCH":"PUT",a)},url:function(a){return a?"id"in this.data?a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.data.id):a:void 0}},b.delegates.Filtered=function(a){b.Model.call(this,a)},b.inherit(b.Model,b.delegates.Filtered),b.delegates.Filtered.prototype.addFilter=function(a,b){return this.data.filters[a]=b,this},b.delegates.Filtered.prototype.removeFilter=function(a){return delete this.data.filters[a],this},b.delegates.Filtered.prototype.role="filtered",b.delegates.Change=function(a){this.construct(a)},b.delegates.Change.prototype=Object.create(b.delegates.Filtered.prototype),b.delegates.Change.prototype.filter=function(a){var c=this.data.filters,d=a.name,e=a.type,f={};return d in c&&c.hasOwnProperty(d)?(f.type=e,f.name=d,f.oldValue=a.oldValue,"deleted"!==e&&(f.value=-1===d.indexOf(".")?a.object[a.name]:b.getPath(d,a.object)),this.delegator[c[d]].call(this.delegator,f)):void 0},b.delegates.Change.prototype.role="change",b.delegates.Data=function(a){this.construct(a)},b.delegates.Data.prototype=Object.create(b.delegates.Filtered.prototype),b.delegates.Data.prototype.filter=function(a){var e,f,g,h,c=this.data.filters,d=Object.keys(c);for(f=0;f<d.length;f++)e=d[f],-1===e.indexOf(".")?e in a&&this.delegator[c[e]].call(this.delegator,a[e]):(h=e.slice(e.lastIndexOf(".")+1),g=b.getPath(e.slice(0,e.lastIndexOf(".")),a),g&&h in g&&this.delegator[c[e]].call(this.delegator,g[h]))},b.delegates.Data.prototype.role="data",b.version="0.9.6",a.sudo=b,"undefined"==typeof a._&&(a._=b)}.call(this,this);
